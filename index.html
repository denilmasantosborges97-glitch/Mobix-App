<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobix - Simula√ß√£o de Apresenta√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #f9fafb;
            overscroll-behavior: none;
        }
        .screen {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            opacity: 0; visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0s 0.5s;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
        }
        .screen.active {
            opacity: 1; visibility: visible;
            transition: opacity 0.5s ease-in-out;
        }
        .modal-backdrop {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease-in-out;
            z-index: 40;
        }
        .modal-backdrop.active { opacity: 1; visibility: visible; }
        .modal-content {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 50;
        }
        .modal-backdrop.active .modal-content { transform: translateY(0); }

        @keyframes car-move { 0% { offset-distance: 0%; } 100% { offset-distance: 100%; } }
        #car-icon {
            offset-path: path("M20 180 Q 150 150 280 180");
            animation: car-move 8s linear forwards;
        }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .pulse-animation { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

        @keyframes badge-reveal {
            0% { transform: scale(0.5); opacity: 0; }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        .badge-reveal-animation { animation: badge-reveal 0.5s ease-out both; }
        
        .rating-stars svg { cursor: pointer; transition: color 0.2s; }
        .rating-stars svg:hover, .rating-stars svg.selected { color: #FBBF24; }
        
        .heatmap-spot {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.5) 0%, rgba(239, 68, 68, 0) 70%);
            animation: pulse 4s infinite ease-in-out;
        }
    </style>
</head>
<body class="overflow-hidden">

    <div id="app-container" class="max-w-sm mx-auto h-screen bg-gray-900 shadow-2xl overflow-hidden relative flex flex-col">
        
        <header class="w-full p-4 bg-gray-900/80 backdrop-blur-sm z-30 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                 <svg width="32" height="32" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0Z" fill="url(#paint0_linear_101_2)"/>
                    <path d="M68 32H32L44 68L56 44L68 32Z" fill="white" fill-opacity="0.9"/>
                    <defs><linearGradient id="paint0_linear_101_2" x1="50" y1="0" x2="50" y2="100" gradientUnits="userSpaceOnUse"><stop stop-color="#10B981"/><stop offset="1" stop-color="#059669"/></linearGradient></defs>
                </svg>
                <h1 class="text-xl font-bold text-white">Mobix</h1>
            </div>
            <div id="user-info" class="text-right hidden">
                <span id="user-name-display" class="font-semibold text-white"></span>
                <div class="flex items-center justify-end space-x-1 text-yellow-400">
                    <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
                    <span id="points-display">0</span>
                </div>
            </div>
        </header>

        <main class="flex-grow relative">

            <!-- Ecr√£s de Autentica√ß√£o -->
            <div id="register-screen" class="screen active p-8 space-y-6"><h2 class="text-3xl font-bold text-center">Crie sua conta Mobix</h2><div class="w-full space-y-4"><input type="text" placeholder="Seu Nome" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500" value="Denilma"><input type="email" placeholder="Seu E-mail" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500" value="demo@mobix.com"><input type="password" placeholder="Sua Senha" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500" value="senha123"><button onclick="simulateRegister()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Criar Conta</button></div><p class="text-center">J√° tem uma conta? <button onclick="showScreen('login-screen')" class="text-emerald-400 hover:underline font-semibold">Entrar</button></p></div>
            <div id="login-screen" class="screen p-8 space-y-6"><h2 class="text-3xl font-bold text-center">Bem-vindo de volta!</h2><div class="w-full space-y-4"><input type="email" placeholder="Seu E-mail" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500" value="demo@mobix.com"><input type="password" placeholder="Sua Senha" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500" value="senha123"><button onclick="simulateLogin()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Entrar</button></div><p class="text-center">N√£o tem uma conta? <button onclick="showScreen('register-screen')" class="text-emerald-400 hover:underline font-semibold">Registar</button></p></div>

            <!-- Ecr√£ Principal (Mapa) -->
            <div id="main-screen" class="screen">
                <div class="w-full h-full bg-gray-800 relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-gray-700 to-gray-800"><svg class="absolute inset-0 w-full h-full text-gray-600/30" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><defs><pattern id="p" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M0 50h100M50 0v100" stroke="currentColor" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#p)"/></svg></div>
                    <div id="heatmap-container" class="absolute inset-0 hidden"><div class="heatmap-spot" style="width: 200px; height: 200px; top: 20%; left: 50%;"></div><div class="heatmap-spot" style="width: 150px; height: 150px; top: 60%; left: 20%; animation-delay: -2s;"></div></div>
                    <div id="car-animation-container" class="absolute inset-0 w-full h-full hidden"><svg id="car-icon" class="text-emerald-400 absolute" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 16.5 12 18l-2-1.5M12 18V6.3c0-1.4 1.5-2.5 3-2.5s3 1.1 3 2.5V18M4 18h16M9 18V6.3c0-1.4 1.5-2.5 3-2.5S15 4.9 15 6.3V18"/></svg></div>
                </div>
                <div id="ride-request-panel" class="absolute bottom-0 left-0 right-0 bg-gray-900 p-6 rounded-t-2xl space-y-4"><h3 class="text-xl font-bold">Onde vamos?</h3><input id="destination-input" type="text" placeholder="Digite o seu destino" class="w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-emerald-500"><button onclick="simulateRequestRide()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Pedir Mobix</button><div class="flex justify-around pt-2"><button onclick="showScreen('profile-screen')" class="text-gray-400 hover:text-white transition-colors">Perfil</button><button onclick="showScreen('history-screen')" class="text-gray-400 hover:text-white transition-colors">Hist√≥rico</button><button onclick="toggleDriverView()" class="text-gray-400 hover:text-white transition-colors">Vis√£o do Motorista</button></div></div>
                <div id="ride-status-panel" class="absolute bottom-0 left-0 right-0 bg-gray-900 p-6 rounded-t-2xl space-y-4 hidden"><div class="flex items-center justify-center space-x-3"><div class="w-4 h-4 rounded-full bg-emerald-500 pulse-animation"></div><h3 id="ride-status-text" class="text-xl font-bold text-center">Procurando motorista...</h3></div><p id="driver-info-text" class="text-center text-gray-400"></p><button onclick="resetApp()" class="w-full p-3 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-white transition-colors mt-4">Cancelar</button></div>
            </div>

            <!-- Ecr√£s de Gamifica√ß√£o e Hist√≥rico -->
            <div id="profile-screen" class="screen p-6"><div class="w-full max-w-sm mx-auto bg-gray-800 rounded-2xl p-6 space-y-6"><h2 class="text-2xl font-bold text-center">Meu Perfil</h2><div class="text-center"><div class="text-5xl font-bold text-yellow-400" id="profile-points">1250</div><div class="text-sm text-gray-400">Mobix Points</div></div><div><h3 class="font-bold mb-3">Minhas Medalhas</h3><div class="grid grid-cols-3 gap-4 text-center"><div id="badge-pioneer" class="p-2 bg-gray-700 rounded-lg opacity-30"><div class="text-4xl">ü•á</div><div class="text-xs">Pioneiro</div></div><div id="badge-explorer" class="p-2 bg-gray-700 rounded-lg opacity-30"><div class="text-4xl">üåç</div><div class="text-xs">Explorador</div></div><div id="badge-night-owl" class="p-2 bg-gray-700 rounded-lg opacity-30"><div class="text-4xl">ü¶â</div><div class="text-xs">Coruja</div></div></div></div><button onclick="showScreen('main-screen')" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Voltar ao Mapa</button></div></div>
            <div id="history-screen" class="screen p-6"><div class="w-full max-w-sm mx-auto bg-gray-800 rounded-2xl p-6 space-y-4"><h2 class="text-2xl font-bold text-center mb-4">Hist√≥rico de Corridas</h2><div id="history-list" class="space-y-3"><p class="text-center text-gray-400">Nenhuma corrida completada ainda.</p></div><button onclick="showScreen('main-screen')" class="w-full mt-4 p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Voltar ao Mapa</button></div></div>

            <!-- Ecr√£ do Motorista -->
            <div id="driver-screen" class="screen p-6"><div class="w-full max-w-sm mx-auto bg-gray-800 rounded-2xl p-6 space-y-6"><h2 class="text-2xl font-bold text-center">Portal do Motorista</h2><div class="grid grid-cols-2 gap-4 text-center"><div class="bg-gray-700 p-4 rounded-lg"><div class="text-sm text-gray-400">Ganhos do Dia</div><div class="text-3xl font-bold text-emerald-400" id="driver-earnings">R$ 0,00</div></div><div class="bg-gray-700 p-4 rounded-lg"><div class="text-sm text-gray-400">Seu N√≠vel</div><div class="text-3xl font-bold text-cyan-400">üèÜ Ouro</div></div></div><div><h3 class="font-bold mb-3">Desafio Semanal</h3><div class="bg-gray-700 p-4 rounded-lg"><p class="font-semibold">Rei da Madrugada</p><p class="text-sm text-gray-400">Complete 10 viagens entre 00h e 06h.</p><div class="w-full bg-gray-600 rounded-full h-2.5 mt-2"><div class="bg-cyan-500 h-2.5 rounded-full" style="width: 70%"></div></div><p class="text-right text-xs mt-1">7 / 10</p></div></div><button onclick="toggleDriverView()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Voltar √† Vis√£o do Passageiro</button></div></div>
        </main>
    </div>

    <!-- Modais -->
    <div id="ride-request-modal" class="modal-backdrop"><div class="modal-content bg-gray-800 p-6 rounded-t-2xl space-y-4 text-center"><h2 class="text-2xl font-bold text-cyan-400">Nova Solicita√ß√£o de Corrida!</h2><div class="text-left space-y-2 py-4"><p><strong class="font-semibold text-gray-400">Dist√¢ncia:</strong> 9 km</p><p><strong class="font-semibold text-gray-400">Ganhos Estimados:</strong> R$ 17,50</p></div><div class="flex space-x-4"><button onclick="acceptRide()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Aceitar</button><button onclick="declineRide()" class="w-full p-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-bold text-white transition-colors">Recusar</button></div></div></div>
    <div id="rating-modal" class="modal-backdrop"><div class="modal-content bg-gray-800 p-6 rounded-t-2xl space-y-4 text-center"><h2 class="text-2xl font-bold">Como foi a sua viagem?</h2><p class="text-gray-400">Avalie o seu motorista para nos ajudar a melhorar.</p><div class="flex justify-center text-4xl text-gray-600 rating-stars my-4" id="stars-container"><svg onclick="rate(1)" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg><svg onclick="rate(2)" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg><svg onclick="rate(3)" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg><svg onclick="rate(4)" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg><svg onclick="rate(5)" xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg></div><button onclick="submitRating()" class="w-full p-3 bg-emerald-600 hover:bg-emerald-700 rounded-lg font-bold text-white transition-colors">Enviar Avalia√ß√£o</button></div></div>

    <script>
        // --- Elementos da DOM ---
        const screens = document.querySelectorAll('.screen');
        const modals = document.querySelectorAll('.modal-backdrop');

        // --- Estado da Simula√ß√£o ---
        let currentScreen = 'register-screen';
        let rideInterval;
        let isDriverView = false;
        const user = { name: 'Denilma', points: 1250, badges: ['pioneer'], rideHistory: [] };
        const driver = { dailyEarnings: 0 };

        // --- Fun√ß√µes de Navega√ß√£o e UI ---
        function showScreen(screenId) {
            screens.forEach(screen => screen.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
        }

        function showModal(modalId) { document.getElementById(modalId).classList.add('active'); }
        function hideModal(modalId) { document.getElementById(modalId).classList.remove('active'); }

        // --- Fluxo de Autentica√ß√£o ---
        function simulateRegister() { showScreen('login-screen'); }

        function simulateLogin() {
            document.getElementById('user-info').classList.remove('hidden');
            document.getElementById('user-name-display').innerText = user.name;
            document.getElementById('points-display').innerText = user.points;
            showScreen('main-screen');
        }

        // --- Fluxo da Corrida (Passageiro) ---
        function simulateRequestRide() {
            const destination = document.getElementById('destination-input').value;
            if (!destination) { alert("Por favor, insira um destino."); return; }
            showModal('ride-request-modal');
        }
        
        function completeRide() {
            const pointsEarned = 150;
            const rideFare = 17.50;
            const destination = document.getElementById('destination-input').value;

            // Atualiza dados do motorista
            updateDriverEarnings(rideFare);

            // Atualiza dados do passageiro
            const newTotalPoints = user.points + pointsEarned;
            animatePoints(user.points, newTotalPoints);
            user.points = newTotalPoints;
            user.badges.push('explorer');
            user.rideHistory.push({ destination: destination, fare: rideFare.toFixed(2) });
            
            updateProfileBadges();
            updateHistoryList();

            // Mostra a avalia√ß√£o
            showModal('rating-modal');
        }

        function showRatingScreen() {
             showModal('rating-modal');
        }

        function submitRating() {
            hideModal('rating-modal');
            resetApp();
        }

        function rate(stars) {
            const starElements = document.querySelectorAll('#stars-container svg');
            starElements.forEach((star, index) => {
                star.classList.toggle('selected', index < stars);
            });
        }
        
        // --- Fluxo da Corrida (Motorista) ---
        function acceptRide() {
            hideModal('ride-request-modal');
            document.getElementById('ride-request-panel').classList.add('hidden');
            document.getElementById('ride-status-panel').classList.remove('hidden');

            const destination = document.getElementById('destination-input').value;
            let step = 0;
            const statuses = [
                { status: "Procurando motorista...", driver: "" }, // Este estado √© pulado
                { status: "Motorista a caminho!", driver: "Carlos (Chevrolet Onix - ABC1234) est√° a 5 minutos." },
                { status: "Em viagem...", driver: `A caminho de ${destination}.` },
                { status: "Viagem Conclu√≠da!", driver: `Chegou ao seu destino.` }
            ];

            // Inicia o processo a partir do passo "Motorista a caminho"
            step = 1; 
            document.getElementById('ride-status-text').innerText = statuses[step].status;
            document.getElementById('driver-info-text').innerText = statuses[step].driver;

            rideInterval = setInterval(() => {
                step++;
                if (step < statuses.length) {
                    document.getElementById('ride-status-text').innerText = statuses[step].status;
                    document.getElementById('driver-info-text').innerText = statuses[step].driver;
                    if (step === 2) {
                        document.getElementById('car-animation-container').classList.remove('hidden');
                    }
                } else {
                    clearInterval(rideInterval);
                    completeRide();
                }
            }, 5000);
        }

        function declineRide() { hideModal('ride-request-modal'); }

        // --- Fun√ß√µes Auxiliares e de UI ---
        function toggleDriverView() {
            isDriverView = !isDriverView;
            document.getElementById('heatmap-container').classList.toggle('hidden', !isDriverView);
            if (isDriverView) {
                showScreen('driver-screen');
            } else {
                showScreen('main-screen');
            }
        }

        function updateDriverEarnings(amount) {
            driver.dailyEarnings += amount;
            document.getElementById('driver-earnings').innerText = `R$ ${driver.dailyEarnings.toFixed(2)}`;
        }
        
        function updateHistoryList() {
            const list = document.getElementById('history-list');
            list.innerHTML = ''; // Limpa a lista
            if (user.rideHistory.length === 0) {
                 list.innerHTML = '<p class="text-center text-gray-400">Nenhuma corrida completada ainda.</p>';
                 return;
            }
            user.rideHistory.slice().reverse().forEach(ride => {
                const rideEl = document.createElement('div');
                rideEl.className = 'bg-gray-700 p-3 rounded-lg flex justify-between items-center';
                rideEl.innerHTML = `
                    <div>
                        <p class="font-semibold">Viagem para ${ride.destination}</p>
                        <p class="text-xs text-gray-400">Ontem</p>
                    </div>
                    <p class="font-bold text-emerald-400">R$ ${ride.fare}</p>`;
                list.appendChild(rideEl);
            });
        }
        
        function animatePoints(start, end) {
            const pointsEl = document.getElementById('points-display');
            const profilePointsEl = document.getElementById('profile-points');
            const duration = 1500;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentVal = Math.floor(progress * (end - start) + start);
                pointsEl.innerText = currentVal;
                profilePointsEl.innerText = currentVal;
                if (progress < 1) { window.requestAnimationFrame(step); }
            };
            window.requestAnimationFrame(step);
        }

        function updateProfileBadges() {
             user.badges.forEach(badgeId => {
                const el = document.getElementById(`badge-${badgeId}`);
                if (el) el.classList.remove('opacity-30');
            });
        }
        
        function resetApp() {
            clearInterval(rideInterval);
            document.getElementById('ride-request-panel').classList.remove('hidden');
            document.getElementById('ride-status-panel').classList.add('hidden');
            document.getElementById('car-animation-container').classList.add('hidden');
            document.getElementById('ride-status-text').innerText = "Procurando motorista...";
            document.getElementById('driver-info-text').innerText = "";
            document.getElementById('destination-input').value = "";
            rate(0); // Limpa as estrelas
        }
        
        // --- Inicializa√ß√£o ---
        document.addEventListener('DOMContentLoaded', () => {
             updateProfileBadges();
             document.getElementById('profile-points').innerText = user.points;
             updateHistoryList();
        });
    </script>

</body>
</html>

